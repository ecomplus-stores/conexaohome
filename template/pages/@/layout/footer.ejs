<%
// load footer options and contacts from content
const footer = _.cms('footer') || {}
const contacts = _.cms('contacts') || {}
const themeCustom = _.settings.theme.custom || ''
%>
<footer class="foo">
  <div class="wmt-plus">
    <button class="wmt-plus-btn">

    </button>
    <div class="wmt-plus-content">
      <div class="wmt-plus-content-top">
        Atendimento pelo WhatsApp
      </div>
      <div class="wmt-plus-content-title">
        Olá, podemos bater um papo pelo WhatsApp, escolha um contato abaixo:
      </div>
      <div class="footer-mt">
        <span>Desenvolvido por: </span>
        <a href="https://bit.ly/3jMgsSe" target="_blank" title="MT Soluções">
          <img src="https://mtsolucoes.com.br/images/logo-mt-rodape.png" height="25px" width="91px">
        </a>
      </div>
    </div>
  </div>
  <div class="container">

    <div class="content-about">
      <%- await include('@/layout/inc/logo', { _ }) %>
      <div class="description">
        <p><%- footer.description.text || _.settings.description %></p>
      </div>
      <% if (footer.contacts.socials) { %>
      <p class="footer__social">
        <%- await include('@/layout/inc/networks', { _, contacts }) %>
      </p>
      <% } %>
    </div>
    <div class="content-institucional">
      <% if (footer.links_1.list_pages || footer.links_1.list.find(({ url }) => url)) { %>
      <div class="col-12 col-sm-6 col-lg col-xl-auto px-xl-4">
        <h2>
          <%= footer.links_1.title || _.dictionary('pages') %>
        </h2>
        <div class="collapse show" id="footer-pages">
          <% if (footer.links_1.list_pages) { %>
          <ul class="footer__links">
            <% (_.cms('pages') || []).forEach(slug => { %>
            <% const { title } = _.cms(`pages/${slug}`) %>
            <li>
              <i class="i-chevron-right"></i>
              <a href="/pages/<%= slug %>">
                <%= title %>
              </a>
            </li>
            <% }) %>
          </ul>
          <% } else { %>
          <ul class="footer__links">
            <% footer.links_1.list.forEach(({ url, text }) => { %>
            <li>
              <i class="i-chevron-right"></i>
              <a href="<%= url %>">
                <%= text %>
              </a>
            </li>
            <% }) %>
          </ul>
          <% } %>
        </div>
      </div>
      <% } %>
    </div>
    <div class="content-contato">
      <% if (footer.contacts.title) { %>
      <h2 class="footer__title">
        <%= footer.contacts.title %>
      </h2>
      <% } %>

      <ul class="list-unstyled">
        <% if (footer.contacts.phone_wpp) { %>
        <% if (contacts.whatsapp) { %>
        <li>
          <span class="footer__list-icon">
            <i class="i-whatsapp"></i>
          </span>
          <a href="javascript:;" target="_blank" rel="noopener" class="whatsapp-link"
            data-tel="<%= contacts.whatsapp.replace(/\D/g, '') %>">
            <%= contacts.whatsapp %>
          </a>
        </li>
        <% } %>
        <% if (contacts.phone) { %>
        <li>
          <span class="footer__list-icon">
            <i class="phone"></i>
          </span>
          <a href="tel:+<%= contacts.phone.replace(/\D/g, '') %>" target="_blank" rel="noopener">
            <%= contacts.phone %>
          </a>
        </li>
        <% } %>
        <% } %>
        <% if (footer.contacts.email) { %>
        <li>
          <span class="footer__list-icon">
            <i class="mail"></i>
          </span>
          <a href="mailto:<%= contacts.email %>" target="_blank" rel="noopener">
            <%= contacts.email %>
          </a>
        </li>
        <% } %>
        <% if (footer.contacts.address) { %>
        <li class="horario">
          <span class="footer__list-icon">
            <i class="hours"></i>
          </span>
          <p></p>
        </li>
        <li>
          <span class="footer__list-icon">
            <i class="pin"></i>
          </span>
          <address>
            <%= contacts.address %>
          </address>
        </li>
        <% } %>
      </ul>
    </div>
    <div class="content-lojas">
      <h2>Conheça Nossas lojas</h2>
      <ul>
        <li>
          <div class="title">
            <i></i>
            <p>Loja Santa Cecília - SP Móveis</p>
          </div>
          <div class="content">Endereço: AV. São João, 1915/1907, Santa Cecília</div>
        </li>
        <li>
          <div class="title">
            <i></i>
            <p>Loja Santa Cecília – SP Decor</p>
          </div>
          <div class="content">Endereço: AV. São João, 1915/1907, Santa Cecília</div>
        </li>
        <li>
          <div class="title">
            <i></i>
            <p>Loja Arouche – Centro SP</p>
          </div>
          <div class="content">Endereço: AV. São João, 1915/1907, Santa Cecília</div>
        </li>
        <li>
          <div class="title">
            <i></i>
            <p>Loja São José dos Campos – Jardim América</p>
          </div>
          <div class="content">Endereço: AV. São João, 1915/1907, Santa Cecília</div>
        </li>
        <li>
          <div class="title">
            <i></i>
            <p>Loja São José dos Campos - SP -Decor</p>
          </div>
          <div class="content">Endereço: AV. São João, 1915/1907, Santa Cecília</div>
        </li>
        <li>
          <div class="title">
            <i></i>
            <p>Loja São Caetano do Sul - Centro</p>
          </div>
          <div class="content">Endereço: AV. São João, 1915/1907, Santa Cecília</div>
        </li>
        <li>
          <div class="title">
            <i></i>
            <p>Loja Campinas – Jardim Santana</p>
          </div>
          <div class="content">Endereço: AV. São João, 1915/1907, Santa Cecília</div>
        </li>
      </ul>
    </div>
  </div>
</footer>
<div class="sub-footer">
  <div class="container">
    <div class="content-pagamentos">
      <h2>Formas de pagamento</h2>
      <p class="footer__payment-methods">
        <% Object.keys(footer.payment_methods).forEach(method => { %>
        <% if (footer.payment_methods[method]) { %>
        <i class="pay-icon pay-icon--<%= method %>"></i>
        <% } %>
        <% }) %>
        <i class="pay-icon pay-icon--pix"></i>
      </p>
    </div>
    <div class="content-selos">
      <h2>Selos de segurança</h2>
      <div class="footer__stamps">
        <%- await include(`@/sections/stamps`, { _, opt: { stamps: footer.stamps } }) %>
      </div>
    </div>
  </div>
  <div class="container">
    <div class="creditos">
      <%- await include('@/layout/inc/ecom-credits') %>
      <div class="legal">
        <span>
          <%= footer.credits || `© ${_.store.name} | CNPJ: ${contacts.doc_number}` %>
        </span>
      </div>
      <div class="btn-to-top"></div>
    </div>
  </div>
</div>
<footer class="footer py-3 py-lg-4 py-xl-5" style="display: none;">
  <div class="container">
    <div class="row">
      <div class="col-12 col-lg-auto order-<%= themeCustom === 'ecom-beauty' ? '' : 'lg-'%>last pl-xl-4">
        <div class="footer__contacts">
          <% if (footer.contacts.title) { %>
          <div class="footer__title">
            <%= footer.contacts.title %>
          </div>
          <% } %>

          <ul class="list-unstyled">
            <% if (footer.contacts.phone_wpp) { %>
            <% if (contacts.whatsapp) { %>
            <li>
              <span class="footer__list-icon">
                <i class="i-whatsapp"></i>
              </span>
              <a href="javascript:;" target="_blank" rel="noopener" class="whatsapp-link"
                data-tel="<%= contacts.whatsapp.replace(/\D/g, '') %>">
                <%= contacts.whatsapp %>
              </a>
            </li>
            <% } %>
            <% if (contacts.phone) { %>
            <li>
              <span class="footer__list-icon">
                <i class="i-phone"></i>
              </span>
              <a href="tel:+<%= contacts.phone.replace(/\D/g, '') %>" target="_blank" rel="noopener">
                <%= contacts.phone %>
              </a>
            </li>
            <% } %>
            <% } %>
            <% if (footer.contacts.email) { %>
            <li>
              <span class="footer__list-icon">
                <i class="i-mail"></i>
              </span>
              <a href="mailto:<%= contacts.email %>" target="_blank" rel="noopener">
                <%= contacts.email %>
              </a>
            </li>
            <% } %>
            <% if (footer.contacts.address) { %>
            <li>
              <address>
                <%= contacts.address %>
              </address>
            </li>
            <% } %>
          </ul>

          <% if (footer.contacts.socials) { %>
          <p class="footer__social">
            <%- await include('@/layout/inc/networks', { _, contacts }) %>
          </p>
          <% } %>
        </div>
      </div>

      <% if (footer.links_1.list_pages || footer.links_1.list.find(({ url }) => url)) { %>
      <div class="col-12 col-sm-6 col-lg col-xl-auto px-xl-4">
        <a class="footer__title" data-toggle="collapse" href="#footer-pages" role="button" aria-expanded="false"
          aria-controls="footer-pages">
          <%= footer.links_1.title || _.dictionary('pages') %>
        </a>
        <div class="collapse" id="footer-pages">
          <% if (footer.links_1.list_pages) { %>
          <ul class="footer__links">
            <% (_.cms('pages') || []).forEach(slug => { %>
            <% const { title } = _.cms(`pages/${slug}`) %>
            <li>
              <i class="i-chevron-right"></i>
              <a href="/pages/<%= slug %>">
                <%= title %>
              </a>
            </li>
            <% }) %>
          </ul>
          <% } else { %>
          <ul class="footer__links">
            <% footer.links_1.list.forEach(({ url, text }) => { %>
            <li>
              <i class="i-chevron-right"></i>
              <a href="<%= url %>">
                <%= text %>
              </a>
            </li>
            <% }) %>
          </ul>
          <% } %>
        </div>
      </div>
      <% } %>

      <% if (footer.links_2.list_categories || footer.links_2.list.find(({ url }) => url)) { %>
      <div class="col-12 col-sm-6 col-lg col-xl-auto px-xl-4">
        <a class="footer__title" data-toggle="collapse" href="#footer-categories" role="button" aria-expanded="false"
          aria-controls="footer-categories">
          <%= footer.links_2.title || _.dictionary('categories') %>
        </a>
        <div class="collapse" id="footer-categories">
          <% if (footer.links_2.list_categories) { %>
          <ul class="footer__links">
            <% _.categories.forEach(({ name, slug, parent }) => { %>
            <% if (!parent) { %>
            <li>
              <i class="i-chevron-right"></i>
              <a href="/<%= slug %>">
                <%= name %>
              </a>
            </li>
            <% } %>
            <% }) %>
          </ul>
          <% } else { %>
          <ul class="footer__links">
            <% footer.links_2.list.forEach(({ url, text }) => { %>
            <li>
              <i class="i-chevron-right"></i>
              <a href="<%= url %>">
                <%= text %>
              </a>
            </li>
            <% }) %>
          </ul>
          <% } %>
        </div>
      </div>
      <% } %>

      <div class="col-12 col-xl order-<%= themeCustom === 'ecom-beauty' ? '' : 'lg-'%>first">
        <h2 class="footer__title footer__store">
          <%= footer.description.title || _.settings.name %>
        </h2>
        <p><%- footer.description.text || _.settings.description %></p>

        <div class="mt-4 mb-3">
          <p class="footer__payment-methods">
            <% Object.keys(footer.payment_methods).forEach(method => { %>
            <% if (footer.payment_methods[method]) { %>
            <i class="pay-icon pay-icon--<%= method %>"></i>
            <% } %>
            <% }) %>
            <i class="pay-icon pay-icon--pix"></i>
          </p>
          <div class="footer__stamps">
            <%- await include(`@/sections/stamps`, { _, opt: { stamps: footer.stamps } }) %>
          </div>
        </div>
      </div>
    </div>

    <div class="footer__credits">
      <span>
        <%= footer.credits || `© ${_.store.name} | CNPJ: ${contacts.doc_number}` %>
      </span>
      <span>
        <%= footer.credits || `${contacts.address}` %>
      </span>
      <% if (themeCustom === 'ecom-beauty') { %>
      <div class="ecom-credits-container">
        <div class="ecom-credits">
          <a href="https://e-com.plus" target="_blank" rel="noopener">
            <img src="https://ecom.nyc3.cdn.digitaloceanspaces.com/storefront/ecom-credits-white.png" alt="E-Com Plus"
              width="125.42" height="20">
          </a>
        </div>
      </div>
      <% } %>
    </div>
    <button id="go-to-top" class="btn btn-primary ml-3" type="button" aria-label="<%= _.dictionary('goToTop') %>">
      <i class="i-chevron-up"></i>
    </button>
  </div>
</footer>

<!-- <%- await include('@/layout/inc/ecom-credits') %> -->

<script>
  (function(){
      const $btn = document.querySelector('.wmt-plus-btn');
      let $content = document.querySelector('.wmt-plus-btn').nextElementSibling;

      const people = [
          {
              name: 'Conexão Home',
              phone: '11 32940706',
              link: '1132940706',
              image: '/img/uploads/logotipo-home-png-site.png'
          }
      ];

      $btn.addEventListener('click', function(){
          $btn.style.pointerEvents = 'none';
          $btn.classList.toggle('active');
          $content.classList.toggle('active');

          if ($content.classList.contains('active')) {
              $content.style.display = 'block';
              setTimeout(function(){
                  $content.style.opacity = 1;
              }, 100);
          }else{
              $content.style.opacity = 0; 
              setTimeout(function(){
                  $content.style.display = 'none';
              }, 600);
          }
          setTimeout(function(){
              $btn.style.pointerEvents = 'all';
          }, 600);
      });

      window.addEventListener('load', function() {
          let $div = document.createElement('div');
          let html = people.map(function(item) {
              return `
                  <div class="wmt-plus-content-card">
                      <div class="wmt-plus-content-card-image">
                          <img src="${item.image}">
                      </div>
                      <div class="wmt-plus-content-card-info">
                          <p>${item.name}</p>
                          <span>${item.phone}</span>
                      </div>
                      <div class="wmt-plus-content-card-btn">
                          <a href="https://wa.me/55${item.link}" target="_blank">
                              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24"><path fill="#ffffff" d="M1.101 21.757L23.8 12.028 1.101 2.3l.011 7.912 13.623 1.816-13.623 1.817-.011 7.912z"></path></svg>
                          </a>
                      </div>
                  </div>
              `;
          });

          html.forEach(item => $div.innerHTML += item);

          document.querySelector('.wmt-plus-content').appendChild($div);
      });
  })();
</script>