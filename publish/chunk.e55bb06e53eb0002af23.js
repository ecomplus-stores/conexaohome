(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{273:function(e,t,n){"use strict";n.d(t,"a",(function(){return i})),n.d(t,"b",(function(){return r}));var o=n(38),c=n(36),a=n(40);const i=o.$ecomConfig.get("currency")||"BRL",r=e=>{const[t,...n]=Object(c.a)(e).split(" / "),o={name:t,id:e.sku,price:Object(a.a)(e).toFixed(2)};n&&n.length?o.variant=n.join(" / "):e.variation_id&&(o.name=t.replace(window.__customGTMVariantRegex||/\s[^\s]+$/,""),o.variant=t.replace(o.name,"").trim()),e.quantity&&(o.quantity=e.quantity);const{categories:i,brands:r}=e;if(i&&i.length){o.category=i[i.length-1];for(let e=0;e<i.length-1&&(o[`dimension${e+1}`]=i[e],4!==e);e++);}return r&&r.length&&(o.brand=r[r.length-1]),o}},288:function(e,t,n){"use strict";n(7),n(2),n(8);var o=n(117),c=n(118),a=n(13),i=n(41),r=n(273);t.a=e=>{const t=window.storefrontApp&&window.storefrontApp.router;if(t){let n,s,u;const d=()=>{const e=[];return a.a.data&&Array.isArray(a.a.data.items)&&a.a.data.items.forEach((t=>{e.push(Object(r.b)(t))})),e},m=t=>{e.push({ecommerce:null}),e.push({event:"eec.checkout_option",ecommerce:{currencyCode:r.a,checkout_option:{actionField:t}}})},p=(t,o)=>{const c={step:t,option:o};1===t&&n||2===t&&s||(e.push({ecommerce:null}),e.push({event:"eec.checkout",ecommerce:{currencyCode:r.a,checkout:{actionField:c,products:d()}}}),e.push({event:"checkout"}),1===t?n=!0:s=!0)},h=(t,n)=>{if(!u){if(window.localStorage.getItem("gtm.orderIdSent")!==t){let s;if(n)try{s=JSON.parse(n)}catch(e){}const{amount:u}=s||window.storefrontApp,p={id:t,revenue:(u&&u.total||a.a.data&&a.a.data.subtotal||0).toFixed(2)};u&&(void 0!==u.freight&&(p.shipping=u.freight.toFixed(2)),void 0!==u.tax&&(p.tax=u.tax.toFixed(2))),s&&(["shipping_method_label","payment_method_label"].forEach(((e,t)=>{s[e]&&m({step:3+t,option:s[e]})})),s.extra_discount&&s.extra_discount.discount_coupon&&(p.coupon=s.extra_discount.discount_coupon));let h=1;if(window.__sendGTMExtraPurchaseData){const t=i.a.getCustomer(),n={};let a;t&&(n.customerDisplayName=Object(o.a)(t),t.name&&(n.customerGivenName=t.name.given_name,n.customerFamilyName=t.name.family_name),n.customerEmail=t.main_email,n.customerPhone=Object(c.a)(t),a=t.addresses&&t.addresses[0]);try{const e=JSON.parse(window.sessionStorage.getItem("ecomCustomerAddress"));"object"==typeof a&&a?Object.assign(a,e):a=e}catch{}a&&a.zip&&(n.shippingAddrZip=a.zip,n.shippingAddrStreet=a.street,n.shippingAddrNumber=a.number,a.street&&a.number&&(n.shippingAddrStreet+=`, ${a.number}`),n.shippingAddrCity=a.city,n.shippingAddrProvinceCode=a.province_code),e.push({event:"purchaseExtraData",...n}),h=100}setTimeout((()=>{e.push({ecommerce:null}),e.push({event:"eec.purchase",ecommerce:{currencyCode:r.a,purchase:{actionField:p,products:d()}}})}),h),window.localStorage.setItem("gtm.orderIdSent",t)}u=!0}};let l;const g=e=>{let{name:t,params:n}=e;switch(t){case"cart":p(1,"Review Cart");break;case"checkout":n.step&&s||p(2,"Login / Signup"),1===Number(n.step)?p(3,"Shipping Method"):2===Number(n.step)&&p(4,"Payment Method");break;case"confirmation":clearTimeout(l),n.json?h(n.id,decodeURIComponent(n.json)):l=setTimeout((()=>{h(n.id)}),1500)}};t.currentRoute&&g(t.currentRoute),t.afterEach(g)}}},289:function(e,t,n){"use strict";n(7),n(2),n(8);var o=n(13),c=n(273);t.a=e=>{const t={};setTimeout((()=>{o.a.data.items.forEach((e=>{t[e.sku]=Object(c.b)(e)}))}),10);const n=n=>{const o=Object(c.b)(n);e.push({ecommerce:null}),e.push({event:"eec.add",ecommerce:{currencyCode:c.a,add:{products:[o]}}}),e.push({event:"addToCart"}),t[n.sku]=o},a=n=>{const o=t[n.sku];e.push({ecommerce:null}),e.push({event:"eec.remove",ecommerce:{currencyCode:c.a,remove:{products:[o?Object.assign({},o):Object(c.b)(n)]}}}),e.push({event:"removeFromCart"}),delete t[n.sku]};o.a.on("addItem",(e=>{let{item:t}=e;return n(t)})),o.a.on("increaseItemQnt",(e=>{let{item:o}=e;const c=t[o.sku];if(c){const e=o.quantity-c.quantity;e>0?n({...o,quantity:e}):a({...o,quantity:-e})}else n(o)})),o.a.on("removeItem",(e=>{let{item:t}=e;return a(t)})),o.a.on("clear",(()=>{for(const e in t)t[e]&&a(t[e])}))}},479:function(e,t,n){"use strict";n.r(t);n(2),n(33);var o=n(288);const c=e=>{const t={item_id:e.id,item_name:e.name,price:e.price,quantity:Math.abs(e.quantity||1)};return e.category&&(t.item_category=e.category),e.brand&&(t.item_brand=e.brand),t},{location:a}=window;var i=n(289);t.default=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{gaTrackingId:t,googleAdsId:n}=e,{gtag:r}=window;"function"==typeof r&&(((e,t,n)=>{const i=()=>setTimeout((()=>{e("event","page_view",{page_title:document.title||"Checkout",page_path:`/${a.hash.split("/")[1]}`,send_to:t})}),300);let r=!1;Object(o.a)({push:t=>{let o,s,{event:u,ecommerce:d}=t;if(u)switch(u){case"eec.checkout":case"eec.checkout_option":o=d&&d.checkout,o&&(r||(e("event","begin_checkout",{items:o.products.map(c)}),r=!0),s=o.actionField&&o.actionField.step),e("event","set_checkout_option",{checkout_step:s||(a.hash.startsWith("#/cart")?1:2)});break;case"eec.purchase":i(),o=d&&d.purchase,o&&o.actionField&&(e("event","purchase",{transaction_id:o.actionField.id,affiliation:document.querySelector('meta[name="author"]').getAttribute("content")||"Shop",value:Number(o.actionField.revenue),currency:d.currencyCode,tax:o.actionField.tax?Number(o.actionField.tax):0,shipping:o.actionField.shipping?Number(o.actionField.shipping):0,items:o.products.map(c)}),n&&e("event","conversion",{send_to:n,value:Number(o.actionField.revenue),currency:d.currencyCode,transaction_id:o.actionField.id}));break;default:i()}}})})(r,t,n),(e=>{Object(i.a)({push:t=>{let{event:n,ecommerce:o}=t;if(o&&("eec.add"===n||"eec.remove"===n)){const t="eec.add"===n,a=o[t?"add":"remove"];a&&a.products&&e("event",t?"add_to_cart":"remove_from_cart",{items:a.products.map(c)})}}})})(r))}}}]);